@{
    ViewBag.Title = "Timesheet";
}

<h2>Timesheet</h2>
<h4>2013-01-07</h4>

<table class="table">
    <thead>
        <tr>
            <th class="visible-desktop">Projecto</th>
            <th class="visible-desktop">Tarefa</th>
            <th>Seg 7</th>
            <th>Ter 8</th>
            <th>Qua 9</th>
            <th>Qui 10</th>
            <th>Sex 11</th>
        </tr>
    </thead>
    <tbody>
        <tr class="hidden-desktop">
            <td colspan="7">BIC-AML - Manutenção Aplicacional</td>
        </tr>
        <tr>
            <td class="visible-desktop">BIC-AML</td>
            <td class="visible-desktop">Manutenção Aplicacional</td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="0" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="1" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="2" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="3" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="4" value="0" /></td>
        </tr>
        <tr class="hidden-desktop">
            <td colspan="7">COLLAB-OUT - Análise e Desenvolvimento Aplicacional</td>
        </tr>
        <tr>
            <td class="visible-desktop">BIC-AML</td>
            <td class="visible-desktop">Manutenção Aplicacional</td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="0" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="1" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="2" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="3" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="4" value="0" /></td>
        </tr>
        <tr class="hidden-desktop">
            <td colspan="7">Interno - Formação</td>
        </tr>
        <tr>
            <td class="visible-desktop">BIC-AML</td>
            <td class="visible-desktop">Manutenção Aplicacional</td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="0" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="1" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="2" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="3" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="4" value="0" /></td>
        </tr>
        <tr class="hidden-desktop">
            <td colspan="7">Interno - Feriado</td>
        </tr>
        <tr>
            <td class="visible-desktop">BIC-AML</td>
            <td class="visible-desktop">Manutenção Aplicacional</td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="0" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="1" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="2" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="3" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="4" value="0" /></td>
        </tr>
        <tr class="hidden-desktop">
            <td colspan="7">Interno - Ausência</td>
        </tr>
        <tr>
            <td class="visible-desktop">BIC-AML</td>
            <td class="visible-desktop">Manutenção Aplicacional</td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="0" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="1" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="2" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="3" value="0" /></td>
            <td><input type="tel" class="span1 timeEntry" data-dayIndex="4" value="0" /></td>
        </tr>
    </tbody>
    <tfoot>
        <tr class="hidden-desktop">
            <td colspan="7"><strong>Total</strong></td>
        </tr>
        <tr>
            <td colspan="2" class="visible-desktop">Total</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td colspan="7">
                <label>Comentários:</label>
                <textarea></textarea>
            </td>
        </tr>
        <tr>
            <td colspan="7">
                <button class="btn btn-primary">Actualizar</button>
                <button class="btn">Limpar</button>
                <button class="btn" onclick="window.location.href = '@Url.Action("Index")'">Voltar</button>
            </td>
        </tr>
    </tfoot>
</table>


@section Scripts
{
    
    <script type="text/javascript">

        $(function() {
            $(".timeEntry").focus(function() {
                var dayIndex = $(this).attr("data-dayIndex");
                var dayTotal = 0;
                $("[data-dayIndex=\"" + dayIndex + "\"]").each(function (index, item) {
                    dayTotal += parseInt($(item).val());
                });
                console.log(dayTotal);
                if (dayTotal < 8) {
                    $(this).val(8 - dayTotal);
                }
                this.select();
            });
        });

    </script>

}
